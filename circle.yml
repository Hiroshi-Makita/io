machine:
  timezone:
    Asia/Tokyo
  environment:
    MAVEN_OPTS: -Xmx512m -XX:MaxPermSize=128m

dependencies:
  override:
    - mvn install -B -pl es-api,common,logback -Dmaven.javadoc.skip=true -Dmaven.test.skip=true

test:
  pre:
    - sudo mkdir -p /fjnfs/dc-core/{dav,eventlog,barInstall}
    - sudo chown -R ubuntu.ubuntu /fjnfs
    - sudo mkdir -p /fj/logback/log/
    - sudo mkdir -p /fj/dc-core/conf/
    - sudo chown -R ubuntu.ubuntu /fj
    - cp -p core/src/test/resources/dc-config.properties.ci /fj/dc-core/conf/dc-config.properties

  override:
    - mvn test -B -pl core -Dtest=com.fujitsu.dc.test.setup.Setup#reset
    - mvn site -B -pl logback,core -Ddependency.locations.enabled=false
